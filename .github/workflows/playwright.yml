name: Playwright Tests
on:
  schedule:
    - cron: '0 0 * * 2'
  workflow_dispatch: 
  pull_request:
    branches:  
     - main
jobs:
  test:
    timeout-minutes: 60
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-node@v4
      with:
        node-version: lts/*
    - name: Install dependencies
      run: npm ci
    - name: Install Playwright Chrome Browser
      run: npx playwright install chromium
    - name: Run Playwright tests
      run: npx playwright test --project=chromium --reporter=html

    - name: Prepare combined report directory
      run: mkdir -p combined-report
    
    - name: Copy files into combined report
      run: |
        cp -r playwright-report 
        cp -r test-results
    - name: Zip combined report
      run: zip -r combined-report.zip combined-report/
    - name: Upload Combined Report Artifact
      uses: actions/upload-artifact@v4
      with:
        name: combined-report
        path: combined-report.zip
        retention-days: 30



        